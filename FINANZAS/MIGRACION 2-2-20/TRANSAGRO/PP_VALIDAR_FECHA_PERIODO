-- QUE TENGA FORMATO
AF_VALIDAR_FECHA ('OVF', :SYSTEM.CURSOR_FIELD, NULL, :GLOBAL.FECHA_SISTEMA);



IF :BDOC.S_DOC_FEC_OPER IS NULL THEN
--PEDIDO DE ANDERSON BIRCK 26/05/2021
SELECT TO_CHAR(TO_DATE(TO_CHAR(SYSDATE,'DD/MM/YYYY')))
INTO :BDOC.S_DOC_FEC_OPER
FROM DUAL;
END IF;



:BDOC.DOC_FEC_OPER := TO_DATE(:BDOC.S_DOC_FEC_OPER,'DD/MM/YYYY');
--
--PL_EXHIBIR_MENSAJE(:BDOC.S_DOC_FEC_OPER||' a'||:BDOC.S_DOC_FEC_OPER );



IF :BDOC.DOC_FEC_OPER IS NULL THEN
PL_EXHIBIR_ERROR('No puede ser nulo la fecha de operacion!');
END IF;


/*
IF NOT :BDOC.DOC_FEC_OPER BETWEEN
:PARAMETER.P_FEC_INIC_SISTEMA
AND :PARAMETER.P_FEC_FIN_SISTEMA
THEN
PL_EXHIBIR_ERROR('La fecha debe estar comprendida entre el '||
TO_CHAR(:PARAMETER.P_FEC_INIC_SISTEMA,'DD-MM-YYYY')||' y el '||
TO_CHAR(:PARAMETER.P_FEC_FIN_SISTEMA,'DD-MM-YYYY'));
END IF;
*/


-- CONTROLAR QUE ESTÉ HABILITADO LA FECHA ENTRE LOS PERIODOS ACTUAL Y SIGUIENTE (2 meses nada más se puedfe operar)
-- FIN CONFIGURACION >> conf_fec_lim_mod ES TRUCO
PL_VALIDAR_HAB_MES_FIN(:BDOC.DOC_FEC_OPER,:PARAMETER.P_EMPRESA, USER);